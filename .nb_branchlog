NB-2: javascript refactor
NB-3: mapresources feature branch
